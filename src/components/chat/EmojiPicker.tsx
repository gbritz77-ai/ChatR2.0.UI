import React, { useState } from "react";

interface Props {
  onSelectEmoji: (emoji: string) => void;
  onClose: () => void;
}

const EmojiPicker: React.FC<Props> = ({ onSelectEmoji, onClose }) => {
  const [searchTerm, setSearchTerm] = useState("");

  // Popular emojis organized by category
  const emojiCategories = {
    Smileys: ["ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚", "ðŸ™‚", "ðŸ™ƒ", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜š", "ðŸ˜™", "ðŸ¥²", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ¤ª", "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜‘", "ðŸ˜", "ðŸ˜¶", "ðŸ¤", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬", "ðŸ¤¥", "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜ª", "ðŸ¤¤", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤®", "ðŸ¤®", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤®", "ðŸ˜µ", "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ˜Ž", "ðŸ¤“", "ðŸ§", "ðŸ˜•", "ðŸ˜Ÿ", "ðŸ™", "â˜¹ï¸", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³", "ðŸ¥º", "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±", "ðŸ˜–", "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤", "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "â˜ ï¸", "ðŸ’©", "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ‘»", "ðŸ‘½", "ðŸ‘¾", "ðŸ¤–", "ðŸ˜º", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜½", "ðŸ™€", "ðŸ˜¿", "ðŸ˜¾"],
    Gestures: ["ðŸ‘‹", "ðŸ¤š", "ðŸ–ï¸", "âœ‹", "ðŸ––", "ðŸ‘Œ", "ðŸ¤Œ", "ðŸ¤", "âœŒï¸", "ðŸ¤ž", "ðŸ«°", "ðŸ¤Ÿ", "ðŸ¤˜", "ðŸ¤™", "ðŸ‘", "ðŸ‘Ž", "âœŠ", "ðŸ‘Š", "ðŸ¤›", "ðŸ¤œ", "ðŸ‘", "ðŸ™Œ", "ðŸ‘", "ðŸ¤²", "ðŸ¤", "ðŸ¤œ", "ðŸ¤›", "ðŸ™"],
    Hearts: ["â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤", "ðŸ¤", "ðŸ¤Ž", "ðŸ’”", "ðŸ’•", "ðŸ’ž", "ðŸ’“", "ðŸ’—", "ðŸ’–", "ðŸ’˜", "ðŸ’", "ðŸ’Ÿ", "ðŸ’Œ", "ðŸ’¢", "ðŸ’¥", "ðŸ’«", "â­", "ðŸŒŸ", "âœ¨", "âš¡", "ðŸ”¥"],
    Symbols: ["â„ï¸", "â˜€ï¸", "â­", "âœ¨", "ðŸŒ™", "â˜ï¸", "ðŸŒˆ", "âš¡", "ðŸ”¥", "ðŸ’§", "â¤ï¸", "ðŸ’”", "âœ¨", "ðŸŽ‰", "ðŸŽŠ", "ðŸŽ", "ðŸŽˆ", "ðŸŽ€", "ðŸŽ¯", "ðŸŽ²", "ðŸŽ®", "ðŸŽª", "ðŸŽ­", "ðŸŽ¨", "ðŸŽ¬", "ðŸŽ¤", "ðŸŽ§", "ðŸŽ¼", "ðŸŽµ", "ðŸŽ¶"],
    Animals: ["ðŸ¶", "ðŸ±", "ðŸ­", "ðŸ¹", "ðŸ°", "ðŸ¦Š", "ðŸ»", "ðŸ¼", "ðŸ¨", "ðŸ¯", "ðŸ¦", "ðŸ®", "ðŸ·", "ðŸ¸", "ðŸµ", "ðŸ’", "ðŸ¶", "ðŸ±", "ðŸ¦", "ðŸ¯", "ðŸ¦’", "ðŸ¦“", "ðŸ¦˜", "ðŸ˜", "ðŸ¦", "ðŸ¦›", "ðŸª", "ðŸ«", "ðŸ¦’", "ðŸ¦˜", "ðŸƒ", "ðŸ‚", "ðŸ„", "ðŸŽ", "ðŸ–", "ðŸ", "ðŸ‘", "ðŸ¦‰", "ðŸ¦…", "ðŸ¦†", "ðŸ¦¢", "ðŸ¦œ", "ðŸ¦ž", "ðŸ¦€", "ðŸ™", "ðŸ ", "ðŸŸ", "ðŸ¡", "ðŸ¦ˆ", "ðŸ¢", "ðŸ", "ðŸ¦Ž", "ðŸ¦–", "ðŸ¦•", "ðŸŒµ", "ðŸŽ„", "ðŸŒ²", "ðŸŒ³", "ðŸŒ´", "ðŸŒ±", "ðŸŒ¿", "â˜˜ï¸", "ðŸ€", "ðŸŽ", "ðŸŽŽ", "ðŸŽ", "ðŸŽ"],
    Food: ["ðŸŽ", "ðŸŠ", "ðŸ‹", "ðŸŒ", "ðŸ‰", "ðŸ‡", "ðŸ“", "ðŸˆ", "ðŸ’", "ðŸ‘", "ðŸ¥­", "ðŸ", "ðŸ¥¥", "ðŸ¥", "ðŸ…", "ðŸ†", "ðŸ¥‘", "ðŸ¥¦", "ðŸ¥¬", "ðŸ¥’", "ðŸŒ¶ï¸", "ðŸŒ½", "ðŸ¥•", "ðŸ§„", "ðŸ§…", "ðŸ¥”", "ðŸ ", "ðŸ¥", "ðŸ¥¯", "ðŸž", "ðŸ¥–", "ðŸ¥¨", "ðŸ§€", "ðŸ¥š", "ðŸ³", "ðŸ§ˆ", "ðŸ¥ž", "ðŸ¥“", "ðŸ¥©", "ðŸ—", "ðŸ–", "ðŸŒ­", "ðŸ”", "ðŸŸ", "ðŸ•", "ðŸ¥ª", "ðŸ¥™", "ðŸ§†", "ðŸŒ®", "ðŸŒ¯", "ðŸ¥—", "ðŸ¥˜", "ðŸ¥«", "ðŸ", "ðŸœ", "ðŸ²", "ðŸ›", "ðŸ£", "ðŸ±", "ðŸ¥Ÿ", "ðŸ¦ª", "ðŸ¤", "ðŸš", "ðŸ¥", "ðŸ¢", "ðŸ¡", "ðŸ§", "ðŸ¨", "ðŸ¦", "ðŸ°", "ðŸŽ‚", "ðŸ§", "ðŸ®", "ðŸ­", "ðŸ¬", "ðŸ«", "ðŸ¿", "ðŸ©", "ðŸª", "ðŸŒ°", "ðŸ¯", "ðŸ¥›", "ðŸ¼", "â˜•", "ðŸµ", "ðŸ¶", "ðŸ¾", "ðŸ·", "ðŸ¸", "ðŸ¹", "ðŸº", "ðŸ»", "ðŸ¥‚", "ðŸ¥ƒ"],
    Objects: ["âŒš", "ðŸ“±", "ðŸ’»", "âŒ¨ï¸", "ðŸ–¥ï¸", "ðŸ–¨ï¸", "ðŸ–±ï¸", "ðŸ–²ï¸", "ðŸ•¹ï¸", "ðŸ—œï¸", "ðŸ’½", "ðŸ’¾", "ðŸ’¿", "ðŸ“€", "ðŸ§®", "ðŸŽ¥", "ðŸŽ¬", "ðŸ“º", "ðŸ“·", "ðŸ“¸", "ðŸ“¹", "ðŸŽžï¸", "ðŸ“ž", "â˜Žï¸", "ðŸ“Ÿ", "ðŸ“ ", "ðŸ“º", "ðŸ“»", "ðŸŽ™ï¸", "ðŸŽšï¸", "ðŸŽ›ï¸", "ðŸ§­", "â±ï¸", "â²ï¸", "â°", "ðŸ•°ï¸", "âŒ›", "â³", "ðŸ“¡", "ðŸ”‹", "ðŸ”Œ", "ðŸ’¡", "ðŸ”¦", "ðŸ•¯ï¸", "ðŸª”", "ðŸ§¯", "ðŸ›¢ï¸", "ðŸ’¸", "ðŸ’µ", "ðŸ’´", "ðŸ’¶", "ðŸ’·", "ðŸ’°", "ðŸ’³", "ðŸ§¾", "âœ‰ï¸", "ðŸ“©", "ðŸ“¨", "ðŸ“¤", "ðŸ“¥", "ðŸ“¦", "ðŸ·ï¸", "ðŸ§§", "ðŸ“ª", "ðŸ“«", "ðŸ“¬", "ðŸ“­", "ðŸ“®", "âœï¸", "âœ’ï¸", "ðŸ–‹ï¸", "ðŸ–Šï¸", "ðŸ–Œï¸", "ðŸ–ï¸", "ðŸ“", "ðŸ“", "ðŸ“‚", "ðŸ“…", "ðŸ“†", "ðŸ—’ï¸", "ðŸ—“ï¸", "ðŸ“‡", "ðŸ“ˆ", "ðŸ“‰", "ðŸ“Š", "ðŸ“‹", "ðŸ“Œ", "ðŸ“", "ðŸ“Ž", "ðŸ–‡ï¸", "ðŸ“", "ðŸ“", "ðŸ§®", "ðŸ““", "ðŸ“”", "ðŸ“’", "ðŸ“•", "ðŸ“—", "ðŸ“˜", "ðŸ“™", "ðŸ“š", "ðŸ“–", "ðŸ§·", "ðŸ§·", "ðŸ§¹", "ðŸ§º", "ðŸ§»", "ðŸ§¼", "ðŸ§½", "ðŸ§¯", "ðŸ›’", "ðŸš—", "ðŸš•", "ðŸš™", "ðŸšŒ", "ðŸšŽ", "ðŸŽï¸", "ðŸš“", "ðŸš‘", "ðŸš’", "ðŸš", "ðŸ›»", "ðŸšš", "ðŸš›", "ðŸšœ", "ðŸï¸", "ðŸŽï¸", "ðŸ›µ", "ðŸ¦¯", "ðŸ¦½", "ðŸ¦¼", "ðŸ›º", "ðŸš²", "ðŸ›´", "ðŸ›¹", "ðŸ›¼", "ðŸš", "â›½", "ðŸš¨", "ðŸš¥", "ðŸš¦", "ðŸ›‘", "ðŸš§", "âš“", "â›µ", "ðŸš¤", "ðŸ›³ï¸", "ðŸ›²", "ðŸ›°ï¸", "ðŸš¢", "âœˆï¸", "ðŸ›©ï¸", "ðŸ›«", "ðŸ›¬", "ðŸ›¶", "ðŸ’º", "ðŸš", "ðŸšŸ", "ðŸš ", "ðŸš¡", "ðŸ›°ï¸", "ðŸš€", "ðŸ›¸", "ðŸŒŒ", "â­", "ðŸŒŸ", "âœ¨", "âš¡"],
  };

  // Flatten all emojis for search
  const allEmojis = Object.values(emojiCategories).flat();

  // Filter emojis based on search term
  const filteredEmojis = searchTerm
    ? allEmojis.filter((emoji) =>
        // Search by emoji appearance (simple substring match with emoji names)
        emoji.toLowerCase().includes(searchTerm.toLowerCase())
      )
    : allEmojis.slice(0, 48); // Show first 48 by default

  return (
    <div
      style={{
        position: "absolute",
        bottom: "100%",
        left: 0,
        backgroundColor: "#1e1b4b",
        border: "1px solid #374151",
        borderRadius: "8px",
        padding: "12px",
        width: "300px",
        maxHeight: "400px",
        overflowY: "auto",
        zIndex: 1000,
        boxShadow: "0 4px 6px rgba(0, 0, 0, 0.3)",
      }}
    >
      {/* Search input */}
      <input
        type="text"
        placeholder="Search emojis..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        style={{
          width: "100%",
          padding: "6px",
          marginBottom: "8px",
          borderRadius: "4px",
          border: "1px solid #374151",
          backgroundColor: "#020617",
          color: "#e5e7eb",
          fontSize: "0.85rem",
          outline: "none",
          boxSizing: "border-box",
        }}
      />

      {/* Emoji grid */}
      <div
        style={{
          display: "grid",
          gridTemplateColumns: "repeat(8, 1fr)",
          gap: "4px",
        }}
      >
        {filteredEmojis.map((emoji, idx) => (
          <button
            key={idx}
            onClick={() => {
              onSelectEmoji(emoji);
              onClose();
            }}
            style={{
              background: "transparent",
              border: "none",
              fontSize: "1.5rem",
              cursor: "pointer",
              padding: "4px",
              borderRadius: "4px",
              transition: "background-color 0.2s",
            }}
            onMouseEnter={(e) => {
              (e.target as HTMLElement).style.backgroundColor = "#374151";
            }}
            onMouseLeave={(e) => {
              (e.target as HTMLElement).style.backgroundColor = "transparent";
            }}
          >
            {emoji}
          </button>
        ))}
      </div>

      {/* No results message */}
      {filteredEmojis.length === 0 && (
        <div
          style={{
            textAlign: "center",
            color: "#9ca3af",
            padding: "12px",
            fontSize: "0.85rem",
          }}
        >
          No emojis found
        </div>
      )}

      {/* Close button */}
      <button
        onClick={onClose}
        style={{
          width: "100%",
          marginTop: "8px",
          padding: "6px",
          background: "#374151",
          border: "none",
          borderRadius: "4px",
          color: "#e5e7eb",
          cursor: "pointer",
          fontSize: "0.85rem",
        }}
      >
        Close
      </button>
    </div>
  );
};

export default EmojiPicker;
